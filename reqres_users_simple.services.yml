services:
  # API Clients
  reqres_users_simple.reqres_api_client:
    class: Drupal\reqres_users_simple\ApiClient\ReqresApiClient
    arguments: ['@http_client_factory', '@logger.factory', '@cache.default', '@config.factory']
    
  # Data Adapters
  reqres_users_simple.reqres_user_adapter:
    class: Drupal\reqres_users_simple\Adapter\ReqresUserDataAdapter
    
  # User Providers
  reqres_users_simple.reqres_user_provider:
    class: Drupal\reqres_users_simple\Provider\ReqresUserProvider
    arguments: ['@reqres_users_simple.reqres_api_client', '@reqres_users_simple.reqres_user_adapter', '@messenger', '@logger.factory']
    
  reqres_users_simple.composite_user_provider:
    class: Drupal\reqres_users_simple\Provider\CompositeUserProvider
    arguments: ['@logger.factory']
    calls:
      - [addProvider, ['@reqres_users_simple.reqres_user_provider']]
      
  # User Manager
  reqres_users_simple.user_provider_manager:
    class: Drupal\reqres_users_simple\Service\UserProviderManager
    arguments: ['@reqres_users_simple.composite_user_provider', '@event_dispatcher', '@messenger', '@logger.factory']
